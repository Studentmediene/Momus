<!--
  ~ Copyright 2016 Studentmediene i Trondheim AS
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="container">
    <row>
        <div class="col-md-6">
            <div class="panel panel-info">
                <div class="panel-heading">
                    Nyheter <span class="pull-right">{{vm.news.length}}</span>
                </div>
                <table class="table">
                    <tbody ng-repeat="n in vm.news">
                        <tr ng-click="show[n] = !show[n]" class="interact active">
                            <td>{{n.title}}</td>
                            <td><span person-widget="n.author">{{n.author.name}}</span></td>
                            <td>{{n.date | date}}</td>
                            <td><button class="btn btn-success btn-xs" ng-click="vm.editNews(n)">Rediger</button></td>
                            <td width="5%">
                                <i ng-show="!show[n]" class="fa fa-arrow-circle-down"></i>
                                <i ng-show="show[n]" class="fa fa-arrow-circle-up"></i>
                            </td>
                        </tr>
                        <tr ng-show="show[n]">
                            <td colspan="5">{{n.content}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel {{vm.new_news.id == undefined ? 'panel-success' : 'panel-warning'}}">
                <div class="panel-heading">
                    <h4 class="panel-title text-center">{{vm.new_news.id === undefined ? 'Ny nyhet' : 'Rediger ' + vm.new_news.title }}</h4>
                </div>
                <div class="panel-body">
                    <form name="newsForm" novalidate>
                        <div class="form-group"
                            ng-class="{'has-error' : newsForm.title.$invalid && newsForm.title.$dirty}">
                            <label for="title">Tittel</label>
                            <input type="text" name="title" id="title" class="form-control" ng-model="vm.new_news.title" required>
                        </div>
                        <div class="form-group"
                            ng-class="{'has-error' : newsForm.content.$invalid && newsForm.content.$dirty}">
                            <label for="content">Tekst</label>
                            <textarea name="content" id="content" class="form-control" ng-model="vm.new_news.content" required></textarea>
                        </div>
                        <!-- buttons -->
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary col-xs-4" ng-disabled="newsForm.$invalid"
                                    ng-click="vm.saveEditedNews()" button-loader="vm.isSaving">Lagre
                            </button>

                            <button class="btn btn-default col-xs-4 col-xs-offset-1" ng-show="vm.new_news.id != undefined"
                                    ng-click="vm.editNews({})">Avbryt
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </row>
</div>
