<!--
  ~ Copyright 2014 Studentmediene i Trondheim AS
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<a href="#/kilder/ny" class="btn btn-primary btn-xs" style="margin-bottom: 5px;">
    <i class="fa fa-plus-circle"></i> Opprett ny kilde
</a>
<a href="#/kilder/tags" class="btn btn-primary btn-xs pull-right" style="margin-bottom: 5px;">
    <i class="fa fa-pencil"></i> Rediger tags
</a>

<div class="well">
    <div class="row">

        <div class="col-xs-12 col-sm-4">
            <label for="searchName">Navn</label>
            <input class="form-control" id="searchName" ng-model="search.name"
                   placeholder="Skriv inn navn">
        </div>

        <div class="col-xs-12 col-sm-4">
            <label for="searchText">Fritekst</label>
            <input id="searchText" class="form-control" ng-model="search.freetext"
                   placeholder="Fritekst søk">
        </div>

        <div class="col-xs-12 col-sm-4">
            <label>Tags</label>
            <input type="hidden" placeholder="tags" class="form-control"
                   ui-select2="select2Options"
                   ng-model="search.tags">
        </div>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-hover table-striped">
        <thead>
        <tr>
            <th>Navn</th>
            <th>Beskrivelse</th>
            <th>Telefon</th>
            <th>E-post</th>
            <th></th>
        </tr>
        </thead>

        <tbody>
        <tr  ng-repeat="source in filteredSources = (sources | filter: search.freetext | filter:{name: search.name} | filter: tagFilter | orderBy:'-id')" class="my-repeat-animation">
            <td>{{source.name}}</td>
            <td>{{source.description}}</td>
            <td>{{source.telephone}}</td>
            <td><a href="mailto:{{source.email}}" ng-show="source.email" target="_blank" title="Åpne epost-klient"><i class="fa fa-envelope"></i></a> {{source.email}}</td>
            <td style="text-align: right;"><a href="#/kilder/{{source.id}}">Åpne</a></td>
        </tr>
        </tbody>
    </table>
</div>
<div ng-show="filteredSources.length == 0 && hasLoadedSources">
    Ingen kilder funnet, juster filteret.
</div>
<div ng-show="!hasLoadedSources">
    <i class="fa fa-spinner fa-spin"></i> Laster inn.
</div>