<div class="disposition-page" ng-class="{'page-done': vm.page.done}">
    <!--Page number-->
    <div class="handle" ng-style="vm.columnWidths.page_nr">{{vm.number}}</div>

    <!--Edit mode -->
    <div ng-style="{width: vm.articleWidth + 'px'}" ng-show="vm.editing">
        <div><b>Artikler</b></div>
        <div class="article-input">
            <multiselect-dropdown
                ng-model="vm.newArticles"
                items="vm.articles"
                label="'name'"
                placeholder="Artikler"
            >
            </multiselect-dropdown>
            <div>
                <button ng-click="vm.createArticle(page)" class="uk-button button-new" uk-tooltip="Lag ny artikkel">
                    <i class="fas fa-plus"></i> <i class="fas fa-file"></i>
                </button>
            </div>
            
        </div>
        <div><b>Annonser</b></div>
        <div class="article-input">
            <multiselect-dropdown
                ng-model="vm.newAdverts"
                items="vm.adverts"
                label="'name'"
                placeholder="Annonser"
            >
            </multiselect-dropdown>
            <div>
                <button ng-click="vm.createAdvert(page)" class="uk-button button-edit" uk-tooltip="Lag ny reklame">
                    <i class="fas fa-plus"></i> <i class="fas fa-bullhorn"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- View mode -->
    <div class="article-cell" ng-style="{width: vm.articleWidth + 'px'}" ng-hide="vm.editing">
        <disposition-article
            ng-repeat="articleId in vm.page.articles"
            article="vm.articlesLookup[articleId]"
            article-statuses="vm.articleStatuses"
            review-statuses="vm.reviewStatuses"
            column-widths="vm.columnWidths"
        ></disposition-article>
        <disposition-advert
            ng-repeat="advertId in vm.page.adverts"
            advert="vm.advertsLookup[advertId]"
            column-widths="vm.columnWidths"
        ></disposition-advert>          
    </div>

    <!--Layout status-->
    <div
        class="d-table-cell"
        ng-style="vm.applyColumnWidth('layout', {'background': vm.page.layout_status.color})"
    >
        <select-dropdown
            ng-model="vm.page.layout_status"
            on-change="vm.updatePageMeta(page)"
            items="vm.layoutStatuses"
            label="'name'"
            unclearable
            small
        >
            <item-markup>
                <span class="status-dropdown-item" style="background-color: {{$parent.value.color}}">
                    {{$parent.value.name}}
                </span>
            </item-markup>
        </select-dropdown>
    </div>

    <!-- Buttons -->
    <div class="page-buttons" ng-style="vm.columnWidths.buttons">
        <button
            ng-click="vm.toggleDone()"
            class="uk-button button-xs"
            ng-class="{'uk-button-danger' : !vm.page.done, 'button-new' : vm.page.done }"
            uk-tooltip="Siden er {{!vm.page.done ? 'ikke ' : ''}} helt ferdig"
        >
            <i class="fas fa-check fa-lg"></i>
        </button>
        <button ng-click="vm.editPage()" class="uk-button button-edit button-xs" ng-hide="vm.editing">
            <i class="fas fa-edit"></i>
        </button>
        <button ng-click="vm.submitPage()" class="uk-button button-new button-xs" ng-show="vm.editing">
            <i class="fas fa-save"></i>
        </button>
        <button ng-click="vm.deletePage()" class="uk-button uk-button-danger button-xs">
            <i class="fas fa-trash"></i>
        </button>
    </div>
</div>